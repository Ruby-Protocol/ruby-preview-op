(function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],l=0,d=[];l<s.length;l++)a=s[l],i[a]&&d.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);A&&A(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={Home:1,"chunk-34f6b9c2":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({Home:"Home"}[e]||e)+"."+{Home:"ae565078","chunk-34f6b9c2":"75266bf2"}[e]+".css",i=s.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var c=o[u],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===i))return t()}var A=document.getElementsByTagName("style");for(u=0;u<A.length;u++){c=A[u],l=c.getAttribute("data-href");if(l===r||l===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],d.parentNode.removeChild(d),n(o)},d.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=o);var u=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=s.p+"js/"+({Home:"Home"}[e]||e)+"."+{Home:"95344826","chunk-34f6b9c2":"e2c3dd68"}[e]+".js";var l=setTimeout((function(){A({type:"timeout",target:c})}),12e4);function A(t){c.onerror=c.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");o.type=r,o.request=a,n[1](o)}i[e]=void 0}}c.onerror=c.onload=A,u.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var A=c;o.push([22,"chunk-vendors"]),n()})({0:function(e,t){},"0d25":function(e,t){e.exports="data:image/png;base64,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"},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},"12ed":function(e,t,n){},13:function(e,t){},1389:function(e,t,n){"use strict";n("12ed")},14:function(e,t){},15:function(e,t){},16:function(e,t){},"16f9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYIAAAHXCAYAAACxuV3NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAgoSURBVHgB7d3NbVxVGIDhbxKzjOQlEgkZOkgJpgOoAOggVBCoIKGChAqSDqAESohICsiGHehyQxA45M9/LOa+zyN5xpZtaXavdM53z5kB4CAts98vc/NkLunaAHDAdg+XOT6eSxACgMO2n7lxfy5BCAAO39fLfPrVXJAQAGzC8mCZj/dzAUIAsA3rPsFHD+cChABgO07WJaK7c05CALApy/1lPrlznv8QAoDNufb4PCOlQgCwPfuZG/fO+sdCALBNd8/61LEQAGzW7vFZRkqFAGC7zjRSKgQA2/bBkVIhANi85d77loiEAGD71iWio8fv+qUQACTs7ixz662nlAoBQMdbR0qFACDlzYtshACgZT9z47WRUiEA6Pni9EipEAAk/TtSKgQATf88dSwEAF0ny3x2WwgA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADihAAgTggA4oQAIE4IAOKEACBOCADijpa5eTKz+2kAODB/zFW4tpvnP68h+HYASPpraWg3vz6YWX4YAHJ2p39Yl4nWJaLdyQAQcbT/z2bx0Zfry9MBIOO1EOzm6YuZ65+v374YABLeGB9dY/B0fftmAEh463MEu3n2ZN0x+H4A2Lx3PlC2m+ffrW8/DgCb9oEni6/fXZPwywCwWe8NwavN42smiQA27INnDb3aPL7+MgYmiQA26EyHzq0xeLk85BgKgA068+mju3n2yCQRwPac6xhqk0QA23OB+wheThLZPAbYinOH4NQxFE8HgIN3oRvKTk0SAXDgLnxV5atJIhfaABy6S91Z7EIbgMO3myuwzK1H6+vtuZzj9eMcD5dx/PcXwBkd7a8kBLAly+wF9Ur8vh+uwLKf/9VvT/4EpKJkG/jb5PwAAAAASUVORK5CYII="},17:function(e,t){},18:function(e,t){},19:function(e,t){},"1a9e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAoCAYAAAAcwQPnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAaDSURBVHgB7VxdcqNGEG5czluqVvscr41PEOcExidY7wmCT2DvCRadwM4JJJ8gzglEThDlBGKzechblPdNzXaLQUaoB7oRYGTxVU3Zml9m+Oju6R4A2AEGTj4ZeGcw/bpddnpvy+5hwAApcqSy6YeL5zLf3yx7N4EBB4UjqAEiFYAXbeZ6o5Im4UCuw4KaWDypRBjIdUBQEWsHUmUYyHUgEBOrAVJlGMh1ADiWVGqQVBmIXODBlxtoAMaYEP/4mN5gymy9Ue7/IpaYEkyfMcWe581BPk4RT9h+CUJo+sC61/iHNkX5eVWB5kR9zbHP2HEN1Nc1U0RrkYAC2NeFvUYdtnd/rnQSPLfZ2hW6UiOSy+yOheOGS8YJQAFHH2eOujOz+7w+KfqegRKOfialqrAFSVVEX9Sij2lCCwKvCz6mCOf1h0mlVB5jpn6A9XwQwqQPVcAUjZ3E0pPK5EW5WDVAv2yuEBfrDl4fSFVtzMuqyZipy0o4B7i6U1KnHldbTypv7MFfUaEP/O1pLnJa1+Yi2ctkU18Jk09Pro/pPfBP2xIX5i3Ix7ly2TKKPnzs4zNTd8Zc4y+YnoBHZu/8zJRtzctKHE79nVfZWlayLcRt5TZVlk4jcA2O5NL1VU9yOeyLM0G7B0fbQDFOAAportVhv4SCMULpOI4xIsEYE6bd+v5tqMImJNVGKfyNZWYMcnStFiPg1bZ+l9MjoMSYAi+tz5k87v7cmm2bbA2TSquwrK81sZom1bpWj8llt/gJUyTd2vcZv0sqWTX+WMim+ZfZmk7bKvuxIlZbpFrX7rfk+hMGREweK7Uk0opw1Dap1q36S6438DohnpeVNFKpVSmtCEddkGrduha5Rm2rJa5/jbukr9iyEyt2rxGTtyG1pNKKQKrQtXUtXtZOpFr3oiKXmXuwbO0m20ULmCJRiKevwHndQupSyWNa1kYotUTSatXf6kJy4Rgex+jwShJoEBT2Afjqu2scL3FMaQxP7BsqtKOFigrZCbY7V4zTtR9rCm7D3Md0ybShh/Onmr6ptf8LyxewTVjWb7UKQqMUiaFjWKIm0B6ucSH+c5T9CKmqCJgyjap+CYTAqyMXYkwfJcFlqoNrRlIr72AdWV9d5ljOY6wNWu8VTHOIaowTgAKOPtoIQi8w3RlF7M+O6TN9kSN5wvTv7HslsdLz6mVHi7+iKvwngQaRGuXflzoiO5KkpG5JtTxpVNoewMdEL7LcIwGmkEqtSnvVIbW4ENFjmbQ6prdp8DZXBF6/o7duIjTeG1ETUhcHuhtijB9eQbugB2q+R6T6CPyGKzt/FkBKBD9XFtrf0rWMoKAOC+UJVGwGjqtJlcFg3O8UdiWX0m8WkGSruTMkScS1o0XKS0of0iMzZ0iuvttXhGWFXROT6oI0uJyfJx2JCW24pxRWalGw+9ZR5bHSttIHik81JxaKYykD3CcPon4Vdoutf+doE1SM8y/TRhVX1FyrqRmEtm0Dpq34IB/WHTnmuzACu+1I77RcSS41uWocGnzEaxNKUx3waSPCcnOumpdLAvYRnKtG/BBYe+w3pkh0fHkVK2ybXPVI9SWEdsHZKfSUa4kiru+SblX+tjpwGOojIzhOVAHRta5PN7RFrp6SCuwLFNziX5c046SAD3JwdbsOH72FDrBxHqtpcvWVVDlwov6ypD73tL4HObi6XYePOlHdW2femyLXHpCKEDN5ZRLLpT4DqIA1eLl6rRzbKbmmTiQk+zJFPXJtfBRktAekIsRM3qjkprjU56SMXJZUtCPzmeIpNAxrJ7Jf+fGE71DuCucLq0QulDogfyFiw3OvEbcvRarMX5PA9g0PgCEdGcQm9e8U18THNMOyuW2XxSjpTJQrJkmY17jRl4aNY69A605x0Gvg70EMHaH0TWg9udR4MVLlQHZW0RFYZmeRq6Lo2c6geSuYJN8H0CMEXRA6j0foCJXfbqhxOE+KPpCKEDN5TreD3cZTaCSB+qA+bjo+GTCWeN2bguijIC2Qqy+kIsSO/NDVYPVCZnpm6wZ0BCNCTSE9G/UE3SDG9AHHi6BDeJrK5S+hmqvsNEJ6iO//haObxknFGc7Kw3cBk51IJYp1fAaQqkdyQGbSbmkTuSlW9pen+4DIBWyeg/KFTROb5prxmPGzwHYey136dA/mjC2KPgoyhQEHAfUX/XZQi31SfwNaRq1vkNYg10CqAXI8q8WTGVP2oDn6MuB14RsuEIoCTzwxVwAAAABJRU5ErkJggg=="},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t,n){e.exports=n("56d7")},"2a7d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",[e._t("default",(function(){return[e._v("button")]}))],2)},a=[],i={},o=i,s=(n("3f5e"),n("2877")),u=Object(s["a"])(o,r,a,!1,null,"4cc6bfad",null);t["a"]=u.exports},3:function(e,t){},"3f5e":function(e,t,n){"use strict";n("fd4d")},4:function(e,t){},5:function(e,t){},"54b1":function(e,t,n){"use strict";var r=t;r.ClientRubyETH=n("62fb"),r.ClientRubyERC20=n("fad8")},"56d7":function(e,t,n){"use strict";n.r(t);var r,a=n("1da1"),i=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("b680"),n("96cf"),n("a026")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"app",attrs:{id:"app"}},[r("header-nav",{ref:"header",staticClass:"nav",attrs:{bgColor:"black"}}),r("div",{ref:"main",staticClass:"main",staticStyle:{position:"absolute",top:"106px",bottom:"26px",width:"100%"}},[r("router-view")],1),r("div",{ref:"footer",staticStyle:{background:"black",position:"fixed",bottom:"0px",left:"0px",width:"100%",height:"26px"}},[r("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:n("eea0"),alt:""}})]),r("r-login",{model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}})],1)},s=[],u=n("5c96"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.side?"header header-side":"header",style:{"background-color":e.bgColor,"padding-left":e.tab?"63px":"41px"}},[r("img",{staticClass:"header-img",attrs:{src:n("1a9e")},on:{click:e.gohome}}),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.tab,expression:"tab"}],staticClass:"header-nav-item"},e._l(e.list,(function(t){return r("li",{key:t.label},[void 0!=t.link?r("a",{staticClass:"label anchorotherweb",attrs:{href:t.link,target:"#"==t.link?"":"_blank"}},[e._v(e._s(t.label))]):r("span",{staticClass:"label",class:{active:!0}},[e._v(e._s(t.label))])])})),0),r("el-dropdown",{staticClass:"header-info"},[r("div",[r("img",{staticClass:"layer",attrs:{src:n("a888")}}),r("span",[e._v(" "+e._s(e.user)+" ")])]),r("el-dropdown-menu",[r("el-dropdown-item",{nativeOn:{click:function(t){return e.connect.apply(null,arguments)}}},[e._v(" Reconnect ")]),"......"!=e.user?r("el-dropdown-item",{nativeOn:{click:function(t){return e.quit.apply(null,arguments)}}},[e._v(" Quit ")]):e._e()],1)],1)],1)},l=[],A=(n("99af"),n("ac1f"),n("5319"),n("2f62")),d=0,f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"loading……";r=u["Loading"].service({lock:!0,text:e,background:"rgba(0, 0, 0, 0.7)"})},g=function(){r.close()},h=function(e){0===d&&f(e),d+=1},p=function(){d<=0||(d-=1,0===d&&g())},m={data:function(){return{list:[{label:"Swap"},{label:"Tutorial",link:"https://rubyprototcol.gitbook.io/ruby-connect/"},{label:"Q&A",link:"https://rubyprototcol.gitbook.io/ruby-connect/faq/faq"},{label:"Info",link:"https://wiki.ruby.xyz"}]}},props:{side:{type:Boolean,default:!1},bgColor:{type:String},tab:{type:Boolean,default:!0}},components:{ElDropdown:u["Dropdown"],ElDropdownItem:u["DropdownItem"],ElDropdownMenu:u["DropdownMenu"]},computed:Object(A["b"])({user:function(e){var t=e.user,n=t.substring(0,5),r=t.substring(t.length-7);return"".concat(n,"......").concat(r)},type:function(e){return e.type}}),methods:{quit:function(){this.$store.commit("setUser",""),console.log(this.$ruby),this.$ruby.rubyClient&&(this.$ruby.rubyClient.account=void 0,this.$ruby.rubyClient.home=void 0),this.$router.replace("/")},connect:function(){console.log("connect"),this.initRubyClient("ETH")},gohome:function(){this.$router.push("/"),this.$hideLoading()},swap:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$ruby.rubyClient){n.next=10;break}return n.prev=1,n.next=4,t.initRubyClient();case 4:n.next=10;break;case 6:n.prev=6,n.t0=n["catch"](1),t.$message("Connect wallet Error"),console.error(n.t0);case 10:if(t.$store.state.type!==e){n.next=13;break}return t.$message("You Are Already Here"),n.abrupt("return");case 13:t.$store.commit("setType",e),n.t1=e,n.next="BNB"===n.t1?17:30;break;case 17:return h("init RubyBNBClient..."),n.prev=18,n.next=21,t.$ruby.initRubyEthClient();case 21:n.next=27;break;case 23:n.prev=23,n.t2=n["catch"](18),t.$message(n.t2.message),console.error(n.t2);case 27:return p(),t.$router.push("/login"),n.abrupt("break",31);case 30:t.$message("Coming Soon!");case 31:case"end":return n.stop()}}),n,null,[[1,6],[18,23]])})))()}}},b=m,w=(n("f3f9"),n("2877")),y=Object(w["a"])(b,c,l,!1,null,"205e7a5b",null),v=y.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.show?r("div",{staticClass:"dialog-box",on:{click:e.close}},[r("div",{staticClass:"dialog",style:"height: "+(e.register?450:370)+"px",on:{click:function(e){e.stopPropagation()}}},[e.register?r("img",{staticClass:"outline",attrs:{src:n("16f9"),alt:""}}):r("img",{staticClass:"outline",attrs:{src:n("89f8"),alt:""}}),r("img",{staticClass:"login",attrs:{src:n("0d25"),alt:""}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.register,expression:"!register"}],staticClass:"login-form"},[r("div",{staticClass:"label gray-font"},[e._v("Ruby Secret Key")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],attrs:{type:"text"},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),r("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.register,expression:"!register"}],staticClass:"footer",attrs:{type:"flex",justify:"space-between",align:"middle"}},[r("el-col",{staticClass:"tip",attrs:{span:18}},[r("div",{staticClass:"white-font"},[e._v("Don't have an Account? ")]),r("div",{staticClass:"switch-text red-font",on:{click:e.toRegist}},[r("span",[e._v("Register")])])]),r("r-button",{staticStyle:{"padding-left":"15px","padding-right":"15px"},nativeOn:{click:function(t){return e.login.apply(null,arguments)}}},[e._v("Login")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.register,expression:"register"}],staticClass:"register"},[r("div",{staticClass:"tip gray-font",staticStyle:{"margin-top":"20px"}},[e._v("Please use our key generator or use a key that is as random as your Meramask wallet private key as the Ruby account private key, and copy it on paper for safekeeping.")]),r("div",{staticClass:"tip red-font",staticStyle:{"margin-top":"20px"}},[e._v("Never share your private key with others.")]),r("div",{staticClass:"tip red-font",staticStyle:{"margin-top":"20px"}},[e._v("This private key is for the access of "+e._s("RUBY-"+this.type)+" account. It cannot be used to access any other Ruby account.")]),r("div",{staticClass:"options"},[r("r-button",{staticStyle:{width:"100%"},nativeOn:{click:function(t){return e.generatorKey.apply(null,arguments)}}},[e._v("Private Key Generator")]),r("div",{staticClass:"red-font center-text",staticStyle:{"font-size":"12px",margin:"10px"}},[e._v("OR")]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ownKey,expression:"ownKey"}],staticStyle:{width:"55%","box-sizing":"border-box",padding:"0 5px"},attrs:{type:"text",placeholder:"Pick Your Own Key"},domProps:{value:e.ownKey},on:{input:function(t){t.target.composing||(e.ownKey=t.target.value)}}}),r("r-button",{staticStyle:{"margin-left":"5%",width:"40%"},nativeOn:{click:function(t){return e.registerOwnKey.apply(null,arguments)}}},[e._v("Register with It")])],1)],1),r("div",{staticClass:"red-font switch-text",on:{click:function(t){e.register=!1}}},[r("span",{staticClass:"red-font"},[e._v("Back to Login")])])])],1)]):e._e()},E=[],R=n("2a7d"),k=(n("d3b7"),n("25f0"),n("399f")),x=n.n(k),B=n("1c46"),I=n.n(B),O=function(){return new x.a(I.a.randomBytes(32),16)},T=function(){return btoa(O().toString())},Q=function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent("This private key is for the access of RUBY-p".concat(t," account.It cannot be used to access any other Ruby account.")+"\n"+e)),n.setAttribute("download","ruby_".concat(t,"_secret_key_").concat(Date.now())),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},M={components:{RButton:R["a"],ElCol:u["Col"],ElRow:u["Row"]},model:{prop:"show",event:"switch"},props:{show:Boolean},data:function(){return{register:!1,account:"",ownKey:""}},created:function(){console.log(this.type)},computed:{type:function(){return this.$store.state.type}},methods:{registerOwnKey:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.ownKey.length<16)){t.next=3;break}return e.$message("Account length must be greater than 16"),t.abrupt("return");case 3:if(e.$ruby.rubyClient){t.next=6;break}return e.$message("Your Local Client Connection Failed.Please Refresh The Page"),t.abrupt("return");case 6:return e.$showLoading("registering..."),t.prev=7,t.next=10,e.$ruby.rubyEthRegister(e.ownKey);case 10:t.next=17;break;case 12:return t.prev=12,t.t0=t["catch"](7),e.$message(t.t0),e.$hideLoading(),t.abrupt("return");case 17:e.$hideLoading(),Q(e.ownKey,e.type),e.register=!1;case 20:case"end":return t.stop()}}),t,null,[[7,12]])})))()},generatorKey:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=T(),e.$showLoading("registering..."),t.prev=2,t.next=5,e.$ruby.rubyEthRegister(n);case 5:t.next=12;break;case 7:return t.prev=7,t.t0=t["catch"](2),e.$message(t.t0),e.$hideLoading(),t.abrupt("return");case 12:e.$hideLoading(),Q(n,e.type),e.register=!1;case 15:case"end":return t.stop()}}),t,null,[[2,7]])})))()},login:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.account){t.next=3;break}return e.$message("please input scret"),t.abrupt("return");case 3:if(e.$ruby.rubyClient){t.next=6;break}return e.$message("Your Local Client Connection Failed.Please Refresh The Page"),t.abrupt("return");case 6:return e.$showLoading("logining in..."),t.prev=7,t.next=10,e.$ruby.rubyEthLogin(e.account);case 10:if(n=t.sent,0!=n){t.next=35;break}return e.$message("Login Successful"),t.prev=13,t.next=16,e.$ruby.rubyEthAddress();case 16:r=t.sent,e.$store.commit("setRubyAddress",r),t.next=29;break;case 20:if(t.prev=20,t.t0=t["catch"](13),e.account="",!t.t0){t.next=27;break}return e.$message(t.t0),e.$hideLoading(),t.abrupt("return");case 27:e.$message("Something Went Wrong."),console.error(t.t0);case 29:e.account="",e.$hideLoading(),e.$router.push("/tx"),e.$hideLogin(),t.next=40;break;case 35:if(-1!=n){t.next=40;break}return e.$message({type:"error",message:"login failed: this ruby account dose not exist"}),e.account="",e.$hideLoading(),t.abrupt("return");case 40:t.next=48;break;case 42:return t.prev=42,t.t1=t["catch"](7),e.$message(t.t1),e.$hideLoading(),e.account="",t.abrupt("return");case 48:case"end":return t.stop()}}),t,null,[[7,42],[13,20]])})))()},close:function(){this.$emit("switch",!1)},toRegist:function(){this.$ruby.rubyClient?this.register=!0:this.$message("Your Local Client Connection Failed.Please Refresh The Page")}}},D=M,S=(n("1389"),Object(w["a"])(D,C,E,!1,null,"c539f6f6",null)),K=S.exports,P={components:{headerNav:v,rLogin:K},data:function(){return{showDialog:!1,loadingCount:0,loading:void 0}},created:function(){i["default"].prototype.$showLoading=this.showLoading,i["default"].prototype.$hideLoading=this.hideLoading,i["default"].prototype.$showLogin=this.showLogin,i["default"].prototype.$hideLogin=this.hideLogin,i["default"].prototype.$switchNetwork=this.switchNetwork},methods:{showLoading:function(e){0===this.loadingCount&&(this.loading=u["Loading"].service({target:this.$refs.main,lock:!0,text:e||"loading……",background:"rgba(0, 0, 0, 0.7)"})),this.loadingCount+=1},hideLoading:function(){this.loadingCount<=0||(this.loadingCount-=1,0===this.loadingCount&&this.loading.close())},showLogin:function(){this.showDialog=!0},hideLogin:function(){this.showDialog=!1},switchNetwork:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("ETH"!=e){t.next=4;break}n=[{chainId:"0x1a4",chainName:"Optimism Goerli",rpcUrls:["https://goerli.optimism.io"],blockExplorerUrls:["https://goerli-optimism.etherscan.io"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}],t.next=10;break;case 4:if("Arbitrum"!=e){t.next=9;break}console.log("select Arbitrum"),n=[{chainId:"0x66eed",chainName:"Arbitrum Goerli Testnet",rpcUrls:["https://goerli-rollup.arbitrum.io/rpc"],blockExplorerUrls:["https://goerli.arbiscan.io/"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}],t.next=10;break;case 9:return t.abrupt("return",!1);case 10:return t.abrupt("return",window.ethereum.request({method:"wallet_addEthereumChain",params:n}));case 11:case"end":return t.stop()}}),t)})))()}}},z=P,H=(n("7c55"),Object(w["a"])(z,o,s,!1,null,null,null)),G=H.exports,N=(n("3ca3"),n("ddb0"),n("caad"),n("8c4f")),L=(n("fb6a"),n("4de4"),n("1276"),n("1157")),q=n.n(L),_=n("99e5"),J=n.n(_),V=n("54b1"),U={web3Provider:null,contracts:{rubyETHContract:null,rubyERC20Contract:null,erc20TokenContract:null},rubyClient:null,alice_address:"0xfb8C80F8143E5baF936fc5c6E73bB07A0a247D10",bob_address:"0xfc71E218fFF23fa5Da59bA02684e9393e84ff523",init:function(e){return U.initWeb3(e)},initWeb3:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=13;break}return U.web3Provider=window.ethereum,e.prev=2,e.next=5,window.ethereum.enable();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.error("User denied account access");case 10:console.log("using modern dApp browser"),e.next=14;break;case 13:window.web3?(U.web3Provider=window.web3.currentProvider,console.log("using legacy dApp browser")):(U.web3Provider=new J.a.providers.HttpProvider("https://ropsten.infura.io/v3/f0133270d95d492aa5d4bb8944b36bc6"),console.log("using ropsten"));case 14:return U.web3=new J.a(U.web3Provider),e.abrupt("return",U.initContract(t));case 16:case"end":return e.stop()}}),e,null,[[2,7]])})));function t(t){return e.apply(this,arguments)}return t}(),initContract:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("initContract",t),n={ETH:"0xa391554CE9Dd3E504CADa7BD369Bf9d8Af59646e",Arbitrum:"0xb7c767237C6B7193f9d7bbFAE4743f3c181E3aD3"},r={ETH:"contracts_op",Arbitrum:"contracts_arbi"},console.log("folder:",r[t],n[t]),e.next=6,q.a.getJSON(r[t]+"/RubyETH.json");case 6:return a=e.sent.abi,U.contracts.rubyETHContract=new U.web3.eth.Contract(a,n[t]),U.contracts.rubyETHContract.setProvider(U.web3Provider),e.abrupt("return",U);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),initRubyEthClient:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.web3.eth.getAccounts();case 2:return t=e.sent,this.rubyClient=new V.ClientRubyETH(U.web3,U.contracts.rubyETHContract,t[0]),e.next=6,this.rubyClient.init();case 6:return console.log("Initialization completed."),e.abrupt("return",t[0]);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyEthLogin:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.secret=t,e.next=3,this.rubyClient.login(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),rubyEthRegister:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.register(t);case 2:console.log("keypair: ",this.rubyClient.account.keypair);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),rubyEthDeposit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.register(this.secret);case 2:return e.next=4,this.rubyClient.mint(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),rubyEthWithdraw:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.register(this.secret);case 2:return e.next=4,this.rubyClient.redeem(t);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),rubyEthBalance:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.readBalanceFromContract();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyEthAddress:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rubyClient.account.publicKeyEncoded());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyEthTransfer:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.transfer(t,n);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),mintERC20Token:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.web3.eth.getAccounts();case 2:return t=e.sent,e.next=5,new Promise((function(e,n){U.contracts.erc20TokenContract.methods.mint(t[0],"20000000000000000000000000").send({from:t[0],gas:47e5}).on("transactionHash",(function(e){console.log('Mint submitted (txHash = "'+e+'").')})).on("receipt",(function(n){U.contracts.erc20TokenContract.methods.balanceOf(t[0]).call().then((function(t){console.log("ERC20 funds minted (balance = "+t+")."),e(n)}))})).on("error",(function(e){n(e)}))}));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),initRubyERC20Client:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.web3.eth.getAccounts();case 2:return t=e.sent,console.log("accounts: ",t),this.rubyClient=new V.ClientRubyERC20(U.web3,U.contracts.rubyERC20Contract,t[0],U.contracts.erc20TokenContract),e.next=7,this.rubyClient.init();case 7:this.secret=t[0].slice(2),console.log("Initialization completed.");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyERC20Register:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.register(this.secret);case 2:console.log("keypair: ",this.rubyClient.account.keypair);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyERC20Deposit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.register(this.secret);case 2:return e.next=4,this.rubyClient.mint(10);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyERC20Withdraw:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.rubyClient.register(this.secret);case 2:return e.next=4,this.rubyClient.redeem(5);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyERC20Balance:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("this.secret: ",this.secret),e.next=3,this.rubyClient.register(this.secret);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyERC20Address:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("ruby address: ",this.rubyClient.account.publicKeyEncoded());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rubyERC20Transfer:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=q()("#TransferRubyERC20Address").val(),n=q()("#TransferRubyERC20Decoys").val().split(",").filter((function(e){return""!=e})),e.next=4,this.rubyClient.transfer(t,5,n);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},j=U;i["default"].use(N["a"]);var Y=[{path:"/",name:"Home",component:function(){return n.e("Home").then(n.bind(null,"bb51"))}},{path:"/tx",component:function(){return n.e("chunk-34f6b9c2").then(n.bind(null,"0951"))}}],X=new N["a"]({routes:Y}),F=["/"];X.beforeEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(F.includes(t.path)||j.rubyClient){e.next=4;break}return i["default"].prototype.$message("Please Init Your Client By Click On The Card Below!"),r("/"),e.abrupt("return");case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var W=X;n("bb26");i["default"].use(A["a"]),i["default"].use(u["Dialog"]),i["default"].use(u["Loading"]);var Z=new A["a"].Store({state:{user:"",type:"",rubyBalance:0,mateMaskBalance:0,rubyAddress:""},mutations:{setUser:function(e,t){e.user=t},setType:function(e,t){e.type=t},setRubyAddress:function(e,t){e.rubyAddress=t},setRubyBalance:function(e,t){e.rubyBalance=t},setMateMaskBalance:function(e,t){e.mateMaskBalance=t}},actions:{getRubyBalance:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,j.rubyEthBalance();case 3:r=t.sent,n("setRubyBalance",r);case 5:case"end":return t.stop()}}),t)})))()},getMateMaskBalance:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.next=3,j.web3.eth.getBalance(r.user);case 3:a=t.sent,n("setMateMaskBalance",(a/1e18).toFixed(4));case 5:case"end":return t.stop()}}),t)})))()},getBalance:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.prev=1,t.next=4,n("getRubyBalance");case 4:return t.next=6,n("getMateMaskBalance");case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](1),Object(u["Message"])("Something Went Wrong."),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}}),$=function(e){return j.init(e).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.web3.eth.getAccounts();case 3:return t=e.sent,console.log(t),e.next=7,j.web3.eth.getBalance(t[0]);case 7:n=e.sent,console.log("banlance",n),Z.commit("setUser",t[0]),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),Object(u["Message"])("Click The Account Button to Reconnect Your Wallet or Refresh This Page.");case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))))};$("ETH"),i["default"].prototype.$ruby=j,i["default"].prototype.initRubyClient=$,i["default"].prototype.$message=u["Message"],i["default"].config.productionTip=!1,new i["default"]({store:Z,router:W,render:function(e){return e(G)}}).$mount("#app")},"5c99":function(e,t,n){n("d3b7"),n("25f0"),n("fb6a");var r=n("399f"),a=n("3337"),i=n("1c46"),o=new r("30644e72e131a029b85045b68181585d97816a916871ca8d3c208c16d87cfd47",16),s=new r("30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001",16),u={};u.curve=new a.curve.short({a:"0",b:"3",p:o,n:s,gRed:!1,g:["77da99d806abd13c9f15ece5398525119d11e11e9836b2ee7d23f6159ad87d4","1485efa927f2ad41bff567eec88f32fb0a0f706588b4e41a8d587d008b7f875"]}),u.zero=u.curve.g.mul(0),u.p=r.red(u.curve.p),u.q=r.red(u.curve.n),u.randomScalar=function(){return new r(i.randomBytes(32),16).toRed(u.q)},u.bytes=function(e){return"0x"+e.toString(16,64)},u.serialize=function(e){return null==e.x&&null==e.y?["0x0000000000000000000000000000000000000000000000000000000000000000","0x0000000000000000000000000000000000000000000000000000000000000000"]:[u.bytes(e.getX()),u.bytes(e.getY())]},u.unserialize=function(e){if("0x0000000000000000000000000000000000000000000000000000000000000000"==e[0]&&"0x0000000000000000000000000000000000000000000000000000000000000000"==e[1])return u.zero;var t=u.curve.point(e[0].slice(2),e[1].slice(2));if(!u.curve.validate(t))throw new Error("Invalid public key (not on curve).");return t},u.serializedToEncoded=function(e){return e[0]+e[1].slice(2)},u.encodedToSerialized=function(e){var t="0x"+e.slice(2,66),n="0x"+e.slice(66);return[t,n]},u.representation=function(e){var t=u.serialize(e);return t[0]+t[1].slice(2)},u.pointEqual=function(e,t){return e.eq(t)},e.exports=u},6:function(e,t){},"62fb":function(e,t,n){var r=n("c973").default,a=n("970b").default,i=n("5bc3").default,o=n("ed6d").default,s=n("2d0d").default;n("96cf"),n("d3b7"),n("25f0");var u=n("a9df"),c=n("f10d"),l=n("399f"),A=n("901e"),d=function(e){"use strict";o(n,e);var t=s(n);function n(e,r,i){return a(this,n),t.call(this,e,r,i)}return i(n,[{key:"mint",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var a,i,o,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,a.checkRegistered(),a.checkValue(),i=a.account,console.log("Initiating mint: value of "+t+" units ("+t*a.unit+" wei)"),o="0x"+c.encrypt(new l(i.available()).toString(16),i.aesKey),s=a.web3.utils.toBN(new A(t*a.unit)).toString(),void 0===n&&(n=4e5),u=a.ruby.methods.mint(i.publicKeySerialized(),t,o).send({from:a.home,value:s,gas:n}).on("transactionHash",(function(e){console.log('Mint submitted (txHash = "'+e+'").')})).on("receipt",function(){var e=r(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.update();case 2:i._state=e.sent,i._state.pending+=parseInt(t),console.log("Mint of "+t+" was successful (uses gas: "+n["gasUsed"]+")"),console.log("Account state: available = ",a.account.available(),", pending = ",a.account.pending(),", lastRollOver = ",a.account.lastRollOver());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){console.log("Mint failed: "+e)})),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(u);e.exports=d},"6f94":function(e,t,n){var r=n("970b").default,a=n("c332"),i=n("8556"),o=function e(){"use strict";r(this,e);var t=new a,n=new i;this.proveTransfer=function(e,n,r,a,i,o,s,u,c,l,A){var d={};d["CLn"]=e,d["CRn"]=n,d["C"]=r,d["D"]=a,d["y"]=i,d["epoch"]=o;var f={};return f["sk"]=s,f["r"]=u,f["bTransfer"]=c,f["bDiff"]=l,f["index"]=A,t.generateProof(d,f).serialize()},this.proveRedeem=function(e,t,r,a,i,o,s){var u={};u["CLn"]=e,u["CRn"]=t,u["y"]=r,u["epoch"]=a,u["sender"]=i;var c={};return c["sk"]=o,c["bDiff"]=s,n.generateProof(u,c).serialize()}};e.exports=o},7:function(e,t){},"7c55":function(e,t,n){"use strict";n("fbd5")},8:function(e,t){},8556:function(e,t,n){var r=n("448a").default,a=n("970b").default;n("fb6a"),n("159b"),n("d81d"),n("ac1f"),n("1276"),n("d3b7"),n("25f0"),n("a630"),n("3ca3"),n("99af");var i=n("aab1"),o=n("399f"),s=n("5c99"),u=n("f2fb"),c=n("ddef"),l=c.GeneratorParams,A=c.GeneratorVector,d=c.FieldVector,f=c.FieldVectorPolynomial,g=c.PolyCommitment,h=n("ff2d"),p=function e(){"use strict";var t=this;a(this,e),this.serialize=function(){var e="0x";return e+=s.representation(t.BA).slice(2),e+=s.representation(t.BS).slice(2),t.tCommits.getVector().forEach((function(t){e+=s.representation(t).slice(2)})),e+=s.bytes(t.tHat).slice(2),e+=s.bytes(t.mu).slice(2),e+=s.bytes(t.c).slice(2),e+=s.bytes(t.s_sk).slice(2),e+=s.bytes(t.s_b).slice(2),e+=s.bytes(t.s_tau).slice(2),e+=t.ipProof.serialize().slice(2),e}},m=function e(){"use strict";a(this,e);var t=new l(32),n=new h;this.generateProof=function(e,a){var c=new p,h=u.hash(i.encodeParameters(["bytes32[2]","bytes32[2]","bytes32[2]","uint256","address"],[e["CLn"],e["CRn"],e["y"],e["epoch"],e["sender"]]));e["CLn"]=s.unserialize(e["CLn"]),e["CRn"]=s.unserialize(e["CRn"]),e["y"]=s.unserialize(e["y"]),a["bDiff"]=new o(a["bDiff"]).toRed(s.q);var m=new d(a["bDiff"].toString(2,32).split("").reverse().map((function(e){return new o(e,2).toRed(s.q)}))),b=m.plus(new o(1).toRed(s.q).redNeg()),w=s.randomScalar();c.BA=t.commit(w,m,b);var y=new d(Array.from({length:32}).map(s.randomScalar)),v=new d(Array.from({length:32}).map(s.randomScalar)),C=s.randomScalar();c.BS=t.commit(C,y,v);for(var E=u.hash(i.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[s.bytes(h),s.serialize(c.BA),s.serialize(c.BS)])),R=[new o(1).toRed(s.q)],k=1;k<32;k++)R.push(R[k-1].redMul(E));R=new d(R);for(var x=u.hash(s.bytes(E)),B=[x.redPow(new o(2))],I=[new o(1).toRed(s.q)],O=1;O<32;O++)I.push(I[O-1].redMul(new o(2).toRed(s.q)));var T=new d(I).times(B[0]),Q=new f(m.plus(x.redNeg()),y),M=new f(R.hadamard(b.plus(x)).add(T),v.hadamard(R)),D=Q.innerProduct(M),S=new g(t,D);c.tCommits=new A(S.getCommitments());var K=u.hash(i.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[s.bytes(x)].concat(r(S.getCommitments().map(s.serialize))))),P=S.evaluate(K);c.tHat=P.getX();var z=P.getR();c.mu=w.redAdd(C.redMul(K));var H=s.randomScalar(),G=s.randomScalar(),N=s.randomScalar(),L=t.getG().mul(H),q=t.getG().mul(G).add(e["CRn"].mul(B[0]).mul(H)),_=t.getG().mul(G.redNeg()).add(t.getH().mul(N)),J=u.gEpoch(e["epoch"]).mul(H);c.c=u.hash(i.encodeParameters(["bytes32","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]"],[s.bytes(K),s.serialize(L),s.serialize(q),s.serialize(_),s.serialize(J)])),c.s_sk=H.redAdd(c.c.redMul(a["sk"])),c.s_b=G.redAdd(c.c.redMul(a["bDiff"].redMul(B[0]))),c.s_tau=N.redAdd(c.c.redMul(z));var V=t.getGs(),U=t.getHs().hadamard(R.invert()),j=R.times(x).add(T),Y=c.BA.add(c.BS.mul(K)).add(V.sum().mul(x.redNeg())).add(U.commit(j));Y=Y.add(t.getH().mul(c.mu.redNeg()));var X=u.hash(i.encodeParameters(["bytes32"],[s.bytes(c.c)])),F=t.getG().mul(X);Y=Y.add(F.mul(c.tHat));var W=new l(F,V,U),Z={primeBase:W,P:Y},$={l:Q.evaluate(K),r:M.evaluate(K)};return c.ipProof=n.generateProof(Z,$,X),c}};e.exports=m},"89f8":function(e,t){e.exports="data:image/png;base64,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"},9:function(e,t){},"9a06":function(e,t,n){},a888:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAXCAYAAAAGAx/kAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFcSURBVHgBzZTPTcMwFMa/BHorlY9I0MojlA3aDToCG8AGhQkQE0AnACYoG5QNsMSFGzlwQ2C+h53EgTiN1QufFCXP9vvF748NRGShlMVkaTF+5mPdW2yl2tZnMQgwXHN62jL7BLzPMxRFOJqjVcMzDzF0pNMLf7h34mwZH52jj+pwjqbN8eNZGWZfkCy2KXOR0CQEt4MmpNqh6QmyK/fObkpnB83v/Pjqt0ekappV+2LVbKRq+yyA2V41tyif0+kyCMM4+y/kf6rKkevmERvRzmjOut0kT9k1G/W2AbI41MCAyYVGmgzwwZy9Gr+b8GBK92rVuR+MF00fRsOP03qgG9CEaVXDJhfSaBsPWiBRwdlbZ+W5cSc8FSQRfL7Jd44dFDbmTqBQAvqhxq7QLrm2qUDSXKKDq3BiO0R+PFh684HJ1poJ29BI3pFXIddwzoQZfx/fI00E2EfxFcY3PeGaJDpuJ9EAAAAASUVORK5CYII="},a9df:function(e,t,n){var r=n("278c").default,a=n("c973").default,i=n("970b").default,o=n("5bc3").default;n("96cf"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("159b"),n("b0c0"),n("fb6a"),n("25f0"),n("498a"),n("d81d"),n("99af");var s=n("399f"),u=n("f2fb"),c=n("5c99"),l=n("b978"),A=n("f10d"),d=n("6f94"),f=n("aab1"),g=n("901e"),h=n("5ba3"),p=h.soliditySha3,m=function(e){return new Promise((function(t){setTimeout(t,e)}))},b=function(){"use strict";function e(t,n,r){if(i(this,e),void 0===t)throw"1st arg should be an initialized Web3 object.";if(void 0===n)throw"2nd arg should be a deployed Ruby constrct object.";if(void 0===r)throw"3rd arg should be the address of an Ethereum account.";console.log("Ruby contract: "+n.options.address),console.log("Native account: "+r),this.web3=t,this.ruby=n,this.home=r}return o(e,[{key:"init",value:function(){var e=a(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.service=new d,t.gasLimit=547e4,e.next=5,t.ruby.methods.round_base().call();case 5:return t.round_base=e.sent,e.next=8,t.ruby.methods.round_len().call();case 8:if(t.round_len=e.sent,t.blockMinedTime=3100,0!=t.round_base){e.next=14;break}t.roundUnitTime=t.blockMinedTime,e.next=19;break;case 14:if(1!=t.round_base){e.next=18;break}t.roundUnitTime=1e3,e.next=19;break;case 18:throw new Error("Invalid round base.");case 19:return e.next=21,t.ruby.methods.unit().call();case 21:return t.unit=e.sent,this._transfers=new Set,this.ruby.events.TransferOccurred({}).on("data",(function(e){if(console.log("Receive TransferOccurred event"),t._transfers.has(e.transactionHash))t._transfers.delete(e.transactionHash);else{var r=t.account;e.returnValues["parties"].forEach((function(i,o){if(c.pointEqual(r.publicKey(),i)){var s=e.blockNumber;n.web3.eth.getBlock(s).then(function(){var i=a(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!=t.round_base){a.next=6;break}return a.next=3,r.update(i.number);case 3:r._state=a.sent,a.next=13;break;case 6:if(1!=t.round_base){a.next=12;break}return a.next=9,r.update(i.timestamp);case 9:r._state=a.sent,a.next=13;break;case 12:throw new Error("Invalid round base.");case 13:n.web3.eth.getTransaction(e.transactionHash).then((function(e){var a;t.ruby._jsonInterface.forEach((function(e){"transfer"==e["name"]&&(a=e["inputs"])}));var i=n.web3.eth.abi.decodeParameters(a,"0x"+e.input.slice(10)),s=l.unserialize([i["C"][o],i["D"]]),u=l.decrypt(s,r.privateKey());u>0&&(r._state.pending+=u,console.log("Transfer of "+u+" received! Balance now "+r.balance()+"."))}));case 14:case"end":return a.stop()}}),a)})));return function(e){return i.apply(this,arguments)}}())}}))}})).on("error",(function(e){console.log(e)})),this.account=new function(){var e=this;this.keypair=void 0,this.aesKey=void 0,this._state={available:0,pending:0,nonceUsed:0,lastRollOver:0},this.update=function(){var n=a(regeneratorRuntime.mark((function n(r){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={},a.available=e._state.available,a.pending=e._state.pending,a.nonceUsed=e._state.nonceUsed,n.next=6,t._getRound(r);case 6:return a.lastRollOver=n.sent,e._state.lastRollOver<a.lastRollOver&&(a.available+=a.pending,a.pending=0,a.nonceUsed=!1),n.abrupt("return",a);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),this.available=function(){return e._state.available},this.setAvailable=function(t){e._state.available=t},this.pending=function(){return e._state.pending},this.setPending=function(t){e._state.pending=t},this.lastRollOver=function(){return e._state.lastRollOver},this.balance=function(){return e._state.available+e._state.pending},this.publicKey=function(){return e.keypair["y"]},this.privateKey=function(){return e.keypair["x"]},this.publicKeySerialized=function(){return c.serialize(e.keypair["y"])},this.privateKeySerialized=function(){return c.bytes(e.keypair["x"])},this.publicKeyEncoded=function(){return c.serializedToEncoded(e.publicKeySerialized())},this.publicKeyHash=function(){var t=f.encodeParameter("bytes32[2]",e.publicKeySerialized());return p(t)}},e.next=27,this.account.update();case 27:this.account._state=e.sent;case 28:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setRedeemFeeStrategy",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this,a=r.ruby.methods.setRedeemFeeStrategy(t,n).send({from:r.home,gas:r.gasLimit}).on("transactionHash",(function(e){console.log('Change redeem fee submitted (txHash = "'+e+'").')})).on("receipt",(function(){console.log("Change redeem fee successful.")})).on("error",(function(e){throw console.log("Change redeem fee failed: "+e),e})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setTransferFeeStrategy",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this,a=r.ruby.methods.setTransferFeeStrategy(t,n).send({from:r.home,gas:r.gasLimit}).on("transactionHash",(function(e){console.log('Change transfer fee submitted (txHash = "'+e+'").')})).on("receipt",(function(){console.log("Change transfer fee successful.")})).on("error",(function(e){throw console.log("Change transfer fee failed: "+e),e})),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"setRoundBase",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,r=n.ruby.methods.setRoundBase(t).send({from:n.home,gas:n.gasLimit}).on("transactionHash",(function(e){console.log('Set round base submitted (txHash = "'+e+'").')})).on("receipt",(function(){console.log("Set round base successful."),n.round_base=t})).on("error",(function(e){throw console.log("Set epohc base failed: "+e),e})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRoundLen",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,r=n.ruby.methods.setRoundLen(t).send({from:n.home,gas:n.gasLimit}).on("transactionHash",(function(e){console.log('Set round length submitted (txHash = "'+e+'").')})).on("receipt",(function(){console.log("Set round length successful."),n.round_len=t})).on("error",(function(e){throw console.log("Set epohc length failed: "+e),e})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRubyAgency",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this,r=n.ruby.methods.setRubyAgency(t).send({from:n.home,gas:n.gasLimit}).on("transactionHash",(function(e){console.log('Set ruby agency submitted (txHash = "'+e+'").')})).on("receipt",(function(){console.log("Set ruby agency successful.")})).on("error",(function(e){throw console.log("Set ruby agency failed: "+e),e})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getRound",value:function(){var e=a(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,0!=n.round_base){e.next=15;break}if(void 0!==t){e.next=12;break}return e.t0=Math,e.next=6,n.web3.eth.getBlockNumber();case 6:return e.t1=e.sent,e.t2=n.round_len,e.t3=e.t1/e.t2,e.abrupt("return",e.t0.floor.call(e.t0,e.t3));case 12:return e.abrupt("return",t/n.round_len);case 13:e.next=20;break;case 15:if(1!=n.round_base){e.next=19;break}return e.abrupt("return",Math.floor((void 0===t?(new Date).getTime()/1e3:t)/n.round_len));case 19:throw new Error("Invalid round base.");case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_away",value:function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,0!=t.round_base){e.next=8;break}return e.next=4,t.web3.eth.getBlockNumber();case 4:return n=e.sent,e.abrupt("return",Math.ceil(n/t.round_len)*t.round_len-n);case 8:if(1!=t.round_base){e.next=11;break}return r=(new Date).getTime(),e.abrupt("return",(Math.ceil(r/(1e3*t.round_len))*(1e3*t.round_len)-r)/1e3);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkRegistered",value:function(){var e=this;if(void 0===e.account.keypair)throw"Call register() first to register an account."}},{key:"checkValue",value:function(e){if(e<=0||e>l.MAX_PLAIN)throw"Invalid value: "+e}},{key:"getGuess",value:function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.checkRegistered(),e.next=4,t.ruby.methods.getGuess(t.account.publicKeySerialized()).call();case 4:if(n=e.sent,null!=n){e.next=7;break}return e.abrupt("return",0);case 7:return r=A.decrypt(n.slice(2),t.account.aesKey),r=parseInt(r,16),console.log("guess: ",r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readBalanceFromContract",value:function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.checkRegistered(),e.next=4,t._getRound();case 4:return n=e.sent,e.next=7,t.ruby.methods.getBalance([t.account.publicKeySerialized()],n+1).call();case 7:return r=e.sent,a=l.unserialize(r[0]),e.next=11,t.getGuess();case 11:return i=e.sent,o=l.decrypt(a,t.account.privateKey(),i),console.log("Read balance successfully: "+o),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"syncAccountState",value:function(){var e=a(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.checkRegistered(),e.next=4,t.ruby.methods.getAccountState(t.account.publicKeySerialized()).call();case 4:return n=e.sent,r=l.unserialize(n["y_available"]),a=l.unserialize(n["y_pending"]),e.next=9,t.getGuess();case 9:return i=e.sent,t.account.setAvailable(l.decrypt(r,t.account.privateKey(),i)),t.account.setPending(l.decrypt(a,t.account.privateKey())),e.next=14,t.ruby.methods.last_roll_over(t.account.publicKeyHash()).call();case 14:return t.account._state.lastRollOver=e.sent,t.account._state.nonceUsed=!0,console.log("Account synchronized with contract: available = ",t.account.available(),", pending = ",t.account.pending(),", lastRollOver = ",t.account.lastRollOver()),e.abrupt("return",0);case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"register",value:function(){var t=a(regeneratorRuntime.mark((function t(n,a){var i,o,s,c,l,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this,void 0===n?(i.account.keypair=u.createAccount(),i.account.aesKey=A.generateKey()):(i.account.keypair=u.keyPairFromSecret(n),i.account.aesKey=A.generateKey(n)),t.next=4,e.registered(i.ruby,i.account.publicKeySerialized());case 4:if(o=t.sent,!o){t.next=11;break}return t.next=8,i.syncAccountState();case 8:return t.abrupt("return",t.sent);case 11:return s=u.sign(i.ruby._address,i.account.keypair),c=r(s,2),l=c[0],d=c[1],void 0===a&&(a=19e4),f=i.ruby.methods.register(i.account.publicKeySerialized(),l,d).send({from:i.home,gas:a}).on("transactionHash",(function(e){console.log('Registration submitted (txHash = "'+e+'").')})).on("receipt",(function(){console.log("Registration successful.")})).on("error",(function(e){i.account.keypair=void 0,console.log("Registration failed: "+e)})),t.abrupt("return",f);case 15:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}()},{key:"login",value:function(){var t=a(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=this,void 0===n?(r.account.keypair=u.createAccount(),r.account.aesKey=A.generateKey()):(r.account.keypair=u.keyPairFromSecret(n),r.account.aesKey=A.generateKey(n)),t.next=4,e.registered(r.ruby,r.account.publicKeySerialized());case 4:if(a=t.sent,!a){t.next=11;break}return t.next=8,r.syncAccountState();case 8:return t.abrupt("return",t.sent);case 11:return console.log("Login failed: this ruby account is not exists"),t.abrupt("return",-1);case 13:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}()},{key:"mint",value:function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Mint not implemented.",t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"redeem",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,i,o,d,f,g,h,p,b,w,y,v,C,E=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this,r.checkRegistered(),r.checkValue(),i=r.account,e.next=6,i.update();case 6:if(o=e.sent,!(t>i.balance())){e.next=9;break}throw new Error("Requested redeem amount of "+t+" exceeds account balance of "+i.balance()+".");case 9:return e.next=11,r._away();case 11:if(d=e.sent,f=0==r.round_base?"blocks":"seconds",!(t>o.available)){e.next=16;break}return console.log("[Pending unmerged] Your redeem has been queued. Please wait "+d+" "+f+" for the release of your funds... "),e.abrupt("return",m(d*r.roundUnitTime).then((function(){return r.redeem(t)})));case 16:if(!o.nonceUsed){e.next=19;break}return console.log("[Nonce used] Your redeem has been queued. Please wait "+d+" "+f+", until the next round..."),e.abrupt("return",m(d*r.roundUnitTime).then((function(){return r.redeem(t)})));case 19:if(0!=r.round_base){e.next=23;break}if(!(r.round_len/4>=d)){e.next=23;break}return console.log("[Short window] Your redeem has been queued. Please wait "+d+" "+f+", until the next round..."),e.abrupt("return",m(d*r.roundUnitTime).then((function(){return E.redeem(t)})));case 23:if(1!=r.round_base){e.next=27;break}if(!(r.blockMinedTime>=d*r.roundUnitTime)){e.next=27;break}return console.log("[Short window] Your redeem has been queued. Please wait "+d+" "+f+", until the next round..."),e.abrupt("return",m(d*r.roundUnitTime).then((function(){return E.redeem(t)})));case 27:return console.log("Initiating redeem."),e.next=30,r._getRound();case 30:return g=e.sent,e.next=33,r.ruby.methods.getBalance([i.publicKeySerialized()],g).call();case 33:return h=e.sent,p=l.unserialize(h[0]),b=l.serialize(l.subPlain(p,t)),w=r.service.proveRedeem(b[0],b[1],i.publicKeySerialized(),o.lastRollOver,r.home,i.privateKey(),o.available-t),y=c.serialize(u.u(o.lastRollOver,i.privateKey())),v="0x"+A.encrypt(new s(i.available()).toString(16),i.aesKey),void 0===n&&(n=3e6),C=r.ruby.methods.redeem(i.publicKeySerialized(),t,y,w,v).send({from:r.home,gas:n}).on("transactionHash",(function(e){console.log('redeem submitted (txHash = "'+e+'").')})).on("receipt",function(){var e=a(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.update();case 2:i._state=e.sent,i._state.nonceUsed=!0,i._state.pending-=t,console.log("redeem of "+t+" was successful (uses gas: "+n["gasUsed"]+")"),console.log("Account state: available = ",r.account.available(),", pending = ",r.account.pending(),", lastRollOver = ",r.account.lastRollOver());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){console.log("redeem failed: "+e)})),e.abrupt("return",C);case 42:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"transfer",value:function(){var t=a(regeneratorRuntime.mark((function t(n,r,i,o){var A,d,f,h,p,b,w,y,v,C,E,R,k,x,B,I,O,T,Q,M,D,S,K,P,z,H,G,N,L,q,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(A=function(e,t){return(Math.ceil(e*Math.log(e)/Math.log(2)*20+5200)+(t?20:0))/1e3},d=function(e,t,n){var r=e[t];e[t]=e[n],e[n]=r},f=this,f.checkRegistered(),f.checkValue(),void 0===i&&(i=["0x2113416df38f399d17efbf8e819bce71edf4224c3394e77d9f656d59fdc07bb10d71e8c0553939a16566141cc62a0f0b0f33041e8863c84bca22387f072c7a6f","0x1eef7bd48f5b4452ff84796cac1f705571b2615c289aee732215801efbf6ddf2248087742b36d1d5d56ac9a164c26dc64692d841a3b2fb07b2fc691ad5eb7195","0x0b9789644e3e9934e1a8de7fee5da9b6211f16a11c52dd079f59e5056009f74406cada714b1bb11d0dace644f4175d85b7a67ab3367c2221ff11dbb86631f632","0x0b3546acfd90f8c2a9e9d35fe53b9673ae2fc281dcdcfaeafd290b852f256b5b2fc6f54d2874ed5f8840a1a525ed401fa741f44040bdef1c16ba985e5a0a0267","0x1e2d3366fd942f345178635e6340c7efae729eaa8b26544aa4350266771ba6f32581f7eae4a86dd8f82dd3eb57dba3d5ea26e6916a75d10e951d17f0c7da4023","0x078b13d654c4e6549040879e387e1c66dabdaa58874c2d9f896af97235cadd0e1571413da3217f3212224a1e740d0349bcdc1cce9347e32de16b9ac9e90f56c6"]),n=n.trim(),i=i.map((function(e){return e.trim()})),h=2+i.length,!(h&h-1)){t.next=11;break}throw"Size of anonymity set must be a power of 2!";case 11:return p=c.encodedToSerialized(n),t.next=14,e.registered(f.ruby,p);case 14:if(b=t.sent,b){t.next=17;break}throw new Error("Receiver has not been registered!");case 17:return w=f.account,t.next=20,w.update();case 20:if(y=t.sent,!(r>w.balance())){t.next=23;break}throw"Requested transfer amount of "+r+" exceeds account balance of "+w.balance()+".";case 23:return t.next=25,f._away();case 25:if(v=t.sent,C=0==f.round_base?"blocks":"seconds",!(r>y.available)){t.next=30;break}return console.log("[Pending unmerged] Your transfer has been queued. Please wait "+v+" "+C+" for the release of your funds..."),t.abrupt("return",m(v*f.roundUnitTime).then((function(){return f.transfer(n,r,i,o)})));case 30:if(!y.nonceUsed){t.next=33;break}return console.log("[Nonce used] Your transfer has been queued. Please wait "+v+" "+C+" until the next round..."),t.abrupt("return",m(v*f.roundUnitTime).then((function(){return f.transfer(n,r,i,o)})));case 33:if(0!=f.round_base){t.next=37;break}if(!(f.round_len/4>=v)){t.next=37;break}return console.log("[Short window] Your transfer has been queued. Please wait "+v+" "+C+", until the next round..."),t.abrupt("return",m(v*f.roundUnitTime).then((function(){return f.transfer(n,r,i,o)})));case 37:if(1!=f.round_base){t.next=44;break}if(E=A(h,!1),!(E>f.round_len)){t.next=41;break}throw"The anonymity size ("+h+") you've requested might take longer than the round length ("+f.round_len+" seconds) to prove. Consider re-deploying, with an round length at least "+Math.ceil(A(h,!0))+" seconds.";case 41:if(!(E>v)){t.next=44;break}return console.log("[Short window] Your transfer has been queued. Please wait "+v+" "+C+", until the next round..."),t.abrupt("return",m(v*f.roundUnitTime).then((function(){return f.transfer(n,r,i,o)})));case 44:if(console.log("Initiating transfer."),n=c.unserialize(p),!c.pointEqual(n,w.publicKey())){t.next=48;break}throw new Error("Sending to yourself is currently unsupported.");case 48:i=i.map((function(e){return c.unserialize(c.encodedToSerialized(e))})),R=[w.publicKey()].concat([n]).concat([]),k=[],x=R.length;while(0!=x)B=Math.floor(Math.random()*x),x--,d(R,B,x),c.pointEqual(R[x],w.publicKey())?k[0]=x:c.pointEqual(R[x],n)&&(k[1]=x);return k[0]%2==k[1]%2&&(I=R[k[1]],R[k[1]]=R[k[1]+(k[1]%2==0?1:-1)],R[k[1]+(k[1]%2==0?1:-1)]=I,k[1]=k[1]+(k[1]%2==0?1:-1)),O=R.map(c.serialize),t.next=57,f._getRound();case 57:return T=t.sent,t.next=60,f.ruby.methods.getBalance(O,T).call();case 60:if(Q=t.sent,M=Q.map((function(e){return l.unserialize(e)})),!M.some((function(e){return e[0].eq(c.zero)&&e[1].eq(c.zero)}))){t.next=64;break}throw new Error("Please make sure all participants are registered.");case 64:return D=c.randomScalar(),S=R.map((function(e,t){return t==k[0]?l.encrypt(new s(-r),e,D):t==k[1]?l.encrypt(new s(r),e,D):l.encrypt(new s(0),e,D)})),K=S.map((function(e){return e[0]})),P=S[0][1],z=M.map((function(e,t){return e[0].add(K[t])})),H=M.map((function(e){return e[1].add(P)})),G=f.service.proveTransfer(z,H,K,P,R,y.lastRollOver,w.privateKey(),D,r,y.available-r,k),N=c.serialize(u.u(y.lastRollOver,w.privateKey())),K=K.map(c.serialize),P=c.serialize(P),t.next=76,this.web3.eth.getGasPrice();case 76:return L=t.sent,void 0===o&&(o=547e4+4e5*i.length),q=f.web3.utils.toBN(new g(o*L)).toString(),_=f.ruby.methods.transfer(K,P,O,N,G).send({from:f.home,value:q,gas:o}).on("transactionHash",(function(e){f._transfers.add(e),console.log('Transfer submitted (txHash = "'+e+'")')})).on("receipt",function(){var e=a(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.update();case 2:w._state=e.sent,w._state.nonceUsed=!0,w._state.pending-=r,console.log("Transfer of "+r+" was successful (uses gas: "+t["gasUsed"]+")"),console.log("Account state: available = ",f.account.available(),", pending = ",f.account.pending(),", lastRollOver = ",f.account.lastRollOver());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){throw console.log("Transfer failed: "+e),new Error(e)})),t.abrupt("return",_);case 81:case"end":return t.stop()}}),t,this)})));function n(e,n,r,a){return t.apply(this,arguments)}return n}()},{key:"transferToClient",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.transfer(t.account.publicKeyEncoded(),n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}],[{key:"registered",value:function(){var e=a(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=f.encodeParameter("bytes32[2]",n),a=p(r),e.next=4,t.methods.registered(a).call();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();e.exports=b},b978:function(e,t,n){var r=n("5c99"),a={};a.MAX_PLAIN=Math.pow(2,32)-1,a.encrypt=function(e,t,n){void 0===n&&(n=r.randomScalar());var a=r.curve.g.mul(e).add(t.mul(n)),i=r.curve.g.mul(n);return[a,i]},a.decrypt=function(e,t,n){var i=e[0],o=e[1],s=i.add(o.mul(t.redNeg()));void 0===n&&(n=0);for(var u=r.curve.g.mul(n),c=r.zero,l=0;l<a.MAX_PLAIN;l++){var A=u.add(c);if(A.eq(s))return n+l;if(A=u.add(c.neg()),A.eq(s))return n-l;c=c.add(r.curve.g)}throw"Unable to decrypt the ciphertext: "+e},a.addPlain=function(e,t){var n=e[0].add(r.curve.g.mul(t)),a=e[1];return[n,a]},a.subPlain=function(e,t){return a.addPlain(e,-t)},a.serialize=function(e){return[r.serialize(e[0]),r.serialize(e[1])]},a.unserialize=function(e){return[r.unserialize(e[0]),r.unserialize(e[1])]},e.exports=a},bb26:function(e,t,n){},c332:function(e,t,n){var r=n("448a").default,a=n("970b").default;n("fb6a"),n("159b"),n("d81d"),n("ac1f"),n("1276"),n("d3b7"),n("25f0"),n("a630"),n("3ca3"),n("99af");var i=n("aab1"),o=n("399f"),s=n("5c99"),u=n("f2fb"),c=n("ddef"),l=c.Convolver,A=c.FieldVector,d=c.FieldVectorPolynomial,f=c.GeneratorParams,g=c.GeneratorVector,h=c.PolyCommitment,p=c.Polynomial,m=n("ff2d"),b=function e(){"use strict";var t=this;a(this,e),this.serialize=function(){var e="0x";return e+=s.representation(t.BA).slice(2),e+=s.representation(t.BS).slice(2),e+=s.representation(t.A).slice(2),e+=s.representation(t.B).slice(2),t.CLnG.forEach((function(t){e+=s.representation(t).slice(2)})),t.CRnG.forEach((function(t){e+=s.representation(t).slice(2)})),t.C_0G.forEach((function(t){e+=s.representation(t).slice(2)})),t.DG.forEach((function(t){e+=s.representation(t).slice(2)})),t.y_0G.forEach((function(t){e+=s.representation(t).slice(2)})),t.gG.forEach((function(t){e+=s.representation(t).slice(2)})),t.C_XG.forEach((function(t){e+=s.representation(t).slice(2)})),t.y_XG.forEach((function(t){e+=s.representation(t).slice(2)})),t.f.getVector().forEach((function(t){e+=s.bytes(t).slice(2)})),e+=s.bytes(t.z_A).slice(2),t.tCommits.getVector().forEach((function(t){e+=s.representation(t).slice(2)})),e+=s.bytes(t.tHat).slice(2),e+=s.bytes(t.mu).slice(2),e+=s.bytes(t.c).slice(2),e+=s.bytes(t.s_sk).slice(2),e+=s.bytes(t.s_r).slice(2),e+=s.bytes(t.s_b).slice(2),e+=s.bytes(t.s_tau).slice(2),e+=t.ipProof.serialize().slice(2),e}},w=function e(){"use strict";a(this,e);var t=new f(64),n=new m,c=function e(t,n,r,a){if(0!=r.length){var i=r.pop(),u=a.pop(),c=new p([i.redNeg(),new o(1).toRed(s.q).redSub(u)]),l=new p([i,u]);e(t,n.mul(c),r,a),e(t,n.mul(l),r,a),r.push(i),a.push(u)}else t.push(n.coefficients)};this.generateProof=function(e,a){var m=new b,w=u.hash(i.encodeParameters(["bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2]","bytes32[2][]","uint256"],[e["CLn"].map(s.serialize),e["CRn"].map(s.serialize),e["C"].map(s.serialize),s.serialize(e["D"]),e["y"].map(s.serialize),e["epoch"]]));e["CLn"]=new g(e["CLn"]),e["CRn"]=new g(e["CRn"]),e["C"]=new g(e["C"]),e["y"]=new g(e["y"]),a["bTransfer"]=new o(a["bTransfer"]).toRed(s.q),a["bDiff"]=new o(a["bDiff"]).toRed(s.q);var y=a["bTransfer"].add(a["bDiff"].shln(32)),v=new A(y.toString(2,64).split("").reverse().map((function(e){return new o(e,2).toRed(s.q)}))),C=v.plus(new o(1).toRed(s.q).redNeg()),E=s.randomScalar();m.BA=t.commit(E,v,C);var R=new A(Array.from({length:64}).map(s.randomScalar)),k=new A(Array.from({length:64}).map(s.randomScalar)),x=s.randomScalar();m.BS=t.commit(x,R,k);var B=e["y"].length();if(B&B-1)throw"Size must be a power of 2!";var I=new o(B).bitLength()-1,O=s.randomScalar(),T=s.randomScalar(),Q=new A(Array.from({length:2*I}).map(s.randomScalar)),M=new A((new o(a["index"][1]).toString(2,I)+new o(a["index"][0]).toString(2,I)).split("").reverse().map((function(e){return new o(e,2).toRed(s.q)}))),D=Q.hadamard(M.times(new o(2).toRed(s.q)).negate().plus(new o(1).toRed(s.q))),S=Q.hadamard(Q).negate(),K=new A([Q.getVector()[0].redMul(Q.getVector()[I]),Q.getVector()[0].redMul(Q.getVector()[I])]),P=new A([Q.getVector()[M.getVector()[0].toNumber()*I],Q.getVector()[M.getVector()[I].toNumber()*I].redNeg()]);m.A=t.commit(O,Q.concat(S).concat(K)),m.B=t.commit(T,M.concat(D).concat(P));var z=u.hash(i.encodeParameters(["bytes32","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]"],[s.bytes(w),s.serialize(m.BA),s.serialize(m.BS),s.serialize(m.A),s.serialize(m.B)])),H=Array.from({length:I}).map(s.randomScalar),G=Array.from({length:I}).map(s.randomScalar),N=Array.from({length:I}).map(s.randomScalar),L=Array.from({length:I}).map(s.randomScalar),q=[],_=[];c(q,new p,Q.getVector().slice(0,I),M.getVector().slice(0,I)),c(_,new p,Q.getVector().slice(I),M.getVector().slice(I)),q=Array.from({length:I}).map((function(e,t){return new A(q.map((function(e){return e[t]})))})),_=Array.from({length:I}).map((function(e,t){return new A(_.map((function(e){return e[t]})))})),m.CLnG=Array.from({length:I}).map((function(t,n){return e["CLn"].commit(q[n]).add(e["y"].getVector()[a["index"][0]].mul(H[n]))})),m.CRnG=Array.from({length:I}).map((function(n,r){return e["CRn"].commit(q[r]).add(t.getG().mul(H[r]))})),m.C_0G=Array.from({length:I}).map((function(t,n){return e["C"].commit(q[n]).add(e["y"].getVector()[a["index"][0]].mul(G[n]))})),m.DG=Array.from({length:I}).map((function(e,n){return t.getG().mul(G[n])})),m.y_0G=Array.from({length:I}).map((function(t,n){return e["y"].commit(q[n]).add(e["y"].getVector()[a["index"][0]].mul(N[n]))})),m.gG=Array.from({length:I}).map((function(e,n){return t.getG().mul(N[n])})),m.C_XG=Array.from({length:I}).map((function(t,n){return e["D"].mul(L[n])})),m.y_XG=Array.from({length:I}).map((function(e,n){return t.getG().mul(L[n])}));for(var J=new o(1).toRed(s.q),V=function(e){j=t.getG().mul(a["bTransfer"].redMul(J)),Y=e%2?_:q,m.C_XG=m.C_XG.map((function(t,n){return t.add(j.mul(Y[n].getVector()[(a["index"][0]+B-(e-e%2))%B].redNeg().redAdd(Y[n].getVector()[(a["index"][1]+B-(e-e%2))%B])))})),0!=e&&(J=J.redMul(z))},U=0;U<B;U++){var j,Y;V(U)}var X=u.hash(i.encodeParameters(["bytes32","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]","bytes32[2][]"],[s.bytes(z),m.CLnG.map(s.serialize),m.CRnG.map(s.serialize),m.C_0G.map(s.serialize),m.DG.map(s.serialize),m.y_0G.map(s.serialize),m.gG.map(s.serialize),m.C_XG.map(s.serialize),m.y_XG.map(s.serialize)]));m.f=M.times(X).add(Q),m.z_A=T.redMul(X).redAdd(O);for(var F=u.hash(i.encodeParameters(["bytes32"],[s.bytes(X)])),W=[new o(1).toRed(s.q)],Z=1;Z<64;Z++)W.push(W[Z-1].redMul(F));W=new A(W);for(var $=u.hash(s.bytes(F)),ee=[$.redPow(new o(2)),$.redPow(new o(3))],te=[new o(1).toRed(s.q)],ne=1;ne<32;ne++)te.push(te[ne-1].redMul(new o(2).toRed(s.q)));for(var re=[],ae=0;ae<2;ae++)for(var ie=0;ie<32;ie++)re.push(ee[ae].redMul(te[ie]));re=new A(re);var oe=new d(v.plus($.redNeg()),R),se=new d(W.hadamard(C.plus($)).add(re),k.hadamard(W)),ue=oe.innerProduct(se),ce=new h(t,ue);m.tCommits=new g(ce.getCommitments());var le=u.hash(i.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[s.bytes($)].concat(r(ce.getCommitments().map(s.serialize))))),Ae=ce.evaluate(le);m.tHat=Ae.getX();var de=Ae.getR();m.mu=E.redAdd(x.redMul(le));for(var fe=s.zero,ge=s.zero,he=s.zero,pe=s.zero,me=s.zero,be=new A(Array.from({length:B}).map((function(){return(new o).toRed(s.q)}))),we=new A(Array.from({length:B}).map((function(){return(new o).toRed(s.q)}))),ye=new o(1).toRed(s.q),ve=0;ve<I;ve++)fe=fe.add(t.getG().mul(H[ve].redNeg().redMul(ye))),pe=pe.add(t.getG().mul(G[ve].redNeg().redMul(ye))),ge=ge.add(e["y"].getVector()[a["index"][0]].mul(N[ve].redNeg().redMul(ye))),me=me.add(t.getG().mul(N[ve].redNeg().redMul(ye))),he=he.add(m.y_XG[ve].mul(ye.neg())),be=be.add(q[ve].times(ye)),we=we.add(_[ve].times(ye)),ye=ye.redMul(X);fe=fe.add(e["CRn"].getVector()[a["index"][0]].mul(ye)),ge=ge.add(e["y"].getVector()[a["index"][0]].mul(ye)),pe=pe.add(e["D"].mul(ye)),me=me.add(t.getG().mul(ye)),be=be.add(new A(Array.from({length:B}).map((function(e,t){return t==a["index"][0]?ye:(new o).toRed(s.q)})))),we=we.add(new A(Array.from({length:B}).map((function(e,t){return t==a["index"][1]?ye:(new o).toRed(s.q)}))));var Ce=new l,Ee=Ce.convolution(be,e["y"]),Re=Ce.convolution(we,e["y"]);J=new o(1).toRed(s.q);for(var ke=0;ke<B;ke++){var xe=ke%2?Re:Ee;he=he.add(xe.getVector()[Math.floor(ke/2)].mul(J)),ke>0&&(J=J.redMul(z))}var Be=s.randomScalar(),Ie=s.randomScalar(),Oe=s.randomScalar(),Te=s.randomScalar(),Qe=me.mul(Be),Me=t.getG().mul(Ie),De=t.getG().mul(Oe).add(pe.mul(ee[0].redNeg()).add(fe.mul(ee[1])).mul(Be)),Se=he.mul(Ie),Ke=t.getG().mul(Oe.redNeg()).add(t.getH().mul(Te)),Pe=u.gEpoch(e["epoch"]).mul(Be);m.c=u.hash(i.encodeParameters(["bytes32","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]","bytes32[2]"],[s.bytes(le),s.serialize(Qe),s.serialize(Me),s.serialize(De),s.serialize(Se),s.serialize(Ke),s.serialize(Pe)])),m.s_sk=Be.redAdd(m.c.redMul(a["sk"])),m.s_r=Ie.redAdd(m.c.redMul(a["r"])),m.s_b=Oe.redAdd(m.c.redMul(a["bTransfer"].redMul(ee[0]).redAdd(a["bDiff"].redMul(ee[1])).redMul(ye))),m.s_tau=Te.redAdd(m.c.redMul(de.redMul(ye)));var ze=t.getGs(),He=t.getHs().hadamard(W.invert()),Ge=W.times($).add(re),Ne=m.BA.add(m.BS.mul(le)).add(ze.sum().mul($.redNeg())).add(He.commit(Ge));Ne=Ne.add(t.getH().mul(m.mu.redNeg()));var Le=u.hash(i.encodeParameters(["bytes32"],[s.bytes(m.c)])),qe=t.getG().mul(Le);Ne=Ne.add(qe.mul(m.tHat));var _e=new f(qe,ze,He),Je={primeBase:_e,P:Ne},Ve={l:oe.evaluate(le),r:se.evaluate(le)};return m.ipProof=n.generateProof(Je,Ve,Le),m}};e.exports=w},ddef:function(e,t,n){var r=n("970b").default;n("159b"),n("fb6a"),n("d81d"),n("4de4"),n("a630"),n("3ca3"),n("99af"),n("cb29");var a=n("5c99"),i=n("f2fb"),o=n("399f"),s=n("5ba3"),u=s.soliditySha3,c=function e(t,n,a){"use strict";r(this,e);var o=i.mapInto(u("G"));if("number"==typeof t){for(var s=[],c=[],l=0;l<t;l++)s.push(i.mapInto(u("G",l))),c.push(i.mapInto(u("H",l)));t=i.mapInto(u("H")),n=new A(s),a=new A(c)}this.getG=function(){return o},this.getH=function(){return t},this.getGs=function(){return n},this.getHs=function(){return a},this.commit=function(e,r,i){var o=t.mul(e),s=n.getVector();if(r.getVector().forEach((function(e,t){o=o.add(s[t].mul(e))})),i){var u=a.getVector();i.getVector().forEach((function(e,t){o=o.add(u[t].mul(e))}))}return o}},l=function e(t){"use strict";var n=this;r(this,e),this.getVector=function(){return t},this.length=function(){return t.length},this.slice=function(n,r){return new e(t.slice(n,r))},this.add=function(n){var r=n.getVector();return new e(t.map((function(e,t){return e.redAdd(r[t])})))},this.plus=function(n){return new e(t.map((function(e){return e.redAdd(n)})))},this.sum=function(){return t.reduce((function(e,t){return e.redAdd(t)}),new o(0).toRed(a.q))},this.negate=function(){return new e(t.map((function(e){return e.redNeg()})))},this.subtract=function(e){return n.add(e.negate())},this.hadamard=function(n){var r=n.getVector();return new e(t.map((function(e,t){return e.redMul(r[t])})))},this.invert=function(){return new e(t.map((function(e){return e.redInvm()})))},this.extract=function(n){return new e(t.filter((function(e,t){return t%2==n})))},this.flip=function(){var n=t.length;return new e(Array.from({length:n}).map((function(e,r){return t[(n-r)%n]})))},this.concat=function(n){return new e(t.concat(n.getVector()))},this.times=function(n){return new e(t.map((function(e){return e.redMul(n)})))},this.innerProduct=function(e){var n=e.getVector();return t.reduce((function(e,t,r){return e.redAdd(t.redMul(n[r]))}),new o(0).toRed(a.q))}},A=function e(t){"use strict";r(this,e),this.getVector=function(){return t},this.length=function(){return t.length},this.slice=function(n,r){return new e(t.slice(n,r))},this.commit=function(e){var n=e.getVector();return t.reduce((function(e,t,r){return e.add(t.mul(n[r]))}),a.zero)},this.sum=function(){return t.reduce((function(e,t){return e.add(t)}),a.zero)},this.add=function(n){var r=n.getVector();return new e(t.map((function(e,t){return e.add(r[t])})))},this.hadamard=function(n){var r=n.getVector();return new e(t.map((function(e,t){return e.mul(r[t])})))},this.negate=function(){return new e(t.map((function(e){return e.neg()})))},this.times=function(n){return new e(t.map((function(e){return e.mul(n)})))},this.extract=function(n){return new e(t.filter((function(e,t){return t%2==n})))},this.concat=function(n){return new e(t.concat(n.getVector()))}},d=function e(){"use strict";r(this,e);var t=new o("14a3074b02521e3b1ed9852e5028452693e87be4e910500c7ba9bbddb2f46edd",16).toRed(a.q),n=function e(n,r){var i=n.length();if(1==i)return n;if(i%2!=0)throw"Input size must be a power of 2!";var s=t.redPow(new o(1).shln(28).div(new o(i)));r&&(s=s.redInvm());for(var u=e(n.extract(0),r),c=e(n.extract(1),r),A=[new o(1).toRed(a.q)],d=1;d<i/2;d++)A.push(A[d-1].redMul(s));A=new l(A);var f=u.add(c.hadamard(A)).concat(u.add(c.hadamard(A).negate()));return r&&(f=f.times(new o(2).toRed(a.q).redInvm())),f};this.convolution=function(e,t){var r=t.length(),i=n(t,!1).hadamard(n(e.flip(),!1));return n(i.slice(0,r/2).add(i.slice(r/2)).times(new o(2).toRed(a.q).redInvm()),!0)}},f=function(){"use strict";function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r(this,e),this.getCoefficients=function(){return n},this.evaluate=function(e){var t=n[0],r=e;return n.slice(1).forEach((function(n){t=t.add(n.times(r)),r=r.redMul(e)})),t},this.innerProduct=function(e){var t=e.getCoefficients(),r=Array(n.length+t.length-1).fill(new o(0).toRed(a.q));return n.forEach((function(e,n){t.forEach((function(t,a){r[n+a]=r[n+a].redAdd(e.innerProduct(t))}))})),r}}return e}(),g=function e(t,n,a){"use strict";r(this,e),this.getX=function(){return n},this.getR=function(){return a},this.commit=function(){return t.getG().mul(n).add(t.getH().mul(a))},this.add=function(r){return new e(t,n.redAdd(r.getX()),a.redAdd(r.getR()))},this.times=function(r){return new e(t,n.redMul(r),a.redMul(r))}},h=function e(t,n){"use strict";r(this,e);var i=[new g(t,n[0],new o(0).toRed(a.q))];n.slice(1).forEach((function(e){i.push(new g(t,e,a.randomScalar()))})),this.getCommitments=function(){return i.slice(1).map((function(e){return e.commit()}))},this.evaluate=function(e){var t=i[0],n=e;return i.slice(1).forEach((function(r){t=t.add(r.times(n)),n=n.redMul(e)})),t}},p=function e(t){"use strict";var n=this;r(this,e),this.coefficients=t||[new o(1).toRed(a.q)],this.mul=function(t){var r=n.coefficients.map((function(e){return e.redMul(t.coefficients[0])}));return r.push((new o).toRed(a.q)),t.coefficients[1].eqn(1)&&(r=r.map((function(e,t){return t>0?e.redAdd(n.coefficients[t-1]):e}))),new e(r)}};e.exports={GeneratorParams:c,FieldVector:l,GeneratorVector:A,Convolver:d,FieldVectorPolynomial:f,PolyCommitment:h,Polynomial:p}},eea0:function(e,t,n){e.exports=n.p+"img/footer.0fd2b650.png"},f10d:function(e,t,n){(function(t){n("fb6a"),n("99af"),n("d3b7"),n("25f0");var r=n("1c46"),a={generateKey:function(e){if(void 0==e)return r.randomBytes(16);var t=r.createHash("sha512");t.update(e+"AES128GCM");var n=t.digest().slice(0,16);return n},encrypt:function(e,n){var a=r.randomBytes(16),i=r.createCipheriv("aes-128-gcm",n,a),o=i.update(e,"utf8");return o=t.concat([o,i.final()]),t.concat([a,i.getAuthTag(),o]).toString("hex")},decrypt:function(e,n){var a=t.from(e,"hex"),i=a.slice(0,16),o=a.slice(16,32),s=r.createDecipheriv("aes-128-gcm",n,i);s.setAuthTag(o);var u=s.update(a.slice(32)).toString("utf8");return u}};e.exports=a}).call(this,n("1c35").Buffer)},f2fb:function(e,t,n){n("fb6a");var r=n("5c99"),a=n("1c46"),i=n("399f"),o=n("aab1"),s=n("5ba3"),u=s.soliditySha3,c={randomUint256:function(){return new i(a.randomBytes(32),16)},sign:function(e,t){var n=r.randomScalar(),a=r.curve.g.mul(n),i=c.hash(o.encodeParameters(["address","bytes32[2]","bytes32[2]"],[e,r.serialize(t["y"]),r.serialize(a)])),s=i.redMul(t["x"]).redAdd(n);return[r.bytes(i),r.bytes(s)]},createAccount:function(){var e=r.randomScalar(),t=r.curve.g.mul(e);return{x:e,y:t}},keyPairFromSecret:function(e){var t=c.hash(e+"ETH"),n=r.curve.g.mul(t);return{x:t,y:n}},mapInto:function(e){var t=new i(e.slice(2),16).toRed(r.p),n=r.curve.p.add(new i(1)).div(new i(4));while(1){var a=t.redPow(new i(3)).redAdd(new i(3).toRed(r.p)),o=a.redPow(n);if(o.redPow(new i(2)).eq(a))return r.curve.point(t.fromRed(),o.fromRed());t.redIAdd(new i(1).toRed(r.p))}},gEpoch:function(e){return c.mapInto(u("Ruby",e))},u:function(e,t){return c.gEpoch(e).mul(t)},hash:function(e){return new i(u(e).slice(2),16).toRed(r.q)}};e.exports=c},f3f9:function(e,t,n){"use strict";n("9a06")},fad8:function(e,t,n){var r=n("c973").default,a=n("970b").default,i=n("5bc3").default,o=n("ed6d").default,s=n("2d0d").default;n("96cf"),n("d3b7"),n("25f0");var u=n("a9df"),c=n("f10d"),l=n("399f"),A=n("901e"),d=function(e){"use strict";o(n,e);var t=s(n);function n(e,r,i,o){var s;if(a(this,n),s=t.call(this,e,r,i),void 0===o)throw"4th arg should be an ERC20 contract.";return console.log("ERC20 contract: "+o.options.address),s.erc20Token=o,s}return i(n,[{key:"mint",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,a){var i,o,s,u,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=this,i.checkRegistered(),i.checkValue(),o=i.account,console.log("Initiating mint: value of "+t+" units ("+t*i.unit+" tokens)"),s=i.web3.utils.toBN(new A(t*i.unit)).toString(),void 0===n&&(n=6e4),e.next=9,i.erc20Token.methods.allowance(i.home,i.ruby.options.address).call();case 9:if(u=e.sent,!(u<s)){e.next=13;break}return e.next=13,i.erc20Token.methods.approve(i.ruby.options.address,s).send({from:i.home,gas:n});case 13:return console.log("ERC20 tokens approved. Start mint..."),d="0x"+c.encrypt(new l(o.available()).toString(16),o.aesKey),void 0===a&&(a=4e5),f=i.ruby.methods.mint(o.publicKeySerialized(),t,d).send({from:i.home,gas:a}).on("transactionHash",(function(e){console.log('Mint submitted (txHash = "'+e+'").')})).on("receipt",function(){var e=r(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.update();case 2:o._state=e.sent,o._state.pending+=parseInt(t),console.log("Mint of "+t+" was successful (uses gas: "+n["gasUsed"]+")"),console.log("Account state: available = ",i.account.available(),", pending = ",i.account.pending(),", lastRollOver = ",i.account.lastRollOver());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){console.log("Mint failed: "+e)})),e.abrupt("return",f);case 18:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),n}(u);e.exports=d},fbd5:function(e,t,n){},fd4d:function(e,t,n){},ff2d:function(e,t,n){var r=n("970b").default;n("159b"),n("fb6a");var a=n("aab1"),i=n("ddef"),o=i.GeneratorParams,s=n("5c99"),u=n("f2fb"),c=function e(){"use strict";var t=this;r(this,e),this.serialize=function(){var e="0x";return t.L.forEach((function(t){e+=s.representation(t).slice(2)})),t.R.forEach((function(t){e+=s.representation(t).slice(2)})),e+=s.bytes(t.a).slice(2),e+=s.bytes(t.b).slice(2),e}},l=function e(){"use strict";r(this,e);var t=function e(t,n,r,i,l,A,d){var f=r.length();if(1==f){var g=new c;return g.L=l,g.R=A,g.a=r.getVector()[0],g.b=i.getVector()[0],g}var h=f/2,p=r.slice(0,h),m=r.slice(h),b=i.slice(0,h),w=i.slice(h),y=t.getGs().slice(0,h),v=t.getGs().slice(h),C=t.getHs().slice(0,h),E=t.getHs().slice(h),R=p.innerProduct(w),k=m.innerProduct(b),x=t.getH(),B=v.commit(p).add(C.commit(w)).add(x.mul(R)),I=y.commit(m).add(E.commit(b)).add(x.mul(k));l.push(B),A.push(I);var O=u.hash(a.encodeParameters(["bytes32","bytes32[2]","bytes32[2]"],[s.bytes(d),s.serialize(B),s.serialize(I)])),T=O.redInvm(),Q=y.times(T).add(v.times(O)),M=C.times(O).add(E.times(T)),D=p.times(O).add(m.times(T)),S=b.times(T).add(w.times(O)),K=B.mul(O.redMul(O)).add(I.mul(T.redMul(T))).add(n),P=new o(x,Q,M);return e(P,K,D,S,l,A,O)};this.generateProof=function(e,n,r){return t(e["primeBase"],e["P"],n["l"],n["r"],[],[],r)}};e.exports=l}});
//# sourceMappingURL=app.84c0fe00.js.map